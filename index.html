<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Federico Atzori, Ph.D.</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            line-height: 1.7;
            color: #e0e0e0;
            background: #0a0a0a;
            transition: all 0.3s ease;
        }

        /* Theme Styles */
        body.theme-hacker {
            background: #000;
            color: #00ff00;
        }

        body.theme-hacker header {
            border-bottom-color: #00ff00;
        }

        body.theme-hacker .terminal-container {
            border-color: #00ff00;
        }

        body.theme-hacker h1,
        body.theme-hacker .terminal-prompt,
        body.theme-hacker .cursor,
        body.theme-hacker .year-title,
        body.theme-hacker nav a:hover {
            color: #00ff00;
        }

        body.theme-hacker nav a,
        body.theme-hacker .subtitle,
        body.theme-hacker .section h3 {
            color: #00ff00;
        }

        body.theme-paper {
            background: #f5f5f5;
            color: #333;
        }

        body.theme-paper header {
            background: #fff;
            border-bottom-color: #333;
        }

        body.theme-paper .terminal-container,
        body.theme-paper .left-column,
        body.theme-paper .right-column {
            background: #fff;
            border-color: #333;
            color: #333;
        }

        body.theme-paper h1,
        body.theme-paper .terminal-prompt,
        body.theme-paper .year-title {
            color: #000;
        }

        body.theme-paper nav a,
        body.theme-paper .subtitle {
            color: #333;
        }

        body.theme-paper nav a:hover {
            color: #000;
        }

        /* Theme Switcher */
        .theme-switcher {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
            background: #1a1a1a;
            border: 1px solid #1a3a52;
            padding: 1rem;
            border-radius: 8px;
            display: flex;
            gap: 0.5rem;
        }

        .theme-btn {
            background: #0f0f0f;
            border: 1px solid #1a3a52;
            color: #6b9bc3;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-family: monospace;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .theme-btn:hover {
            border-color: #ffd700;
            color: #ffd700;
        }

        .theme-btn.active {
            background: #1a3a52;
            color: #ffd700;
        }

        header {
            background: #000;
            border-bottom: 2px solid #1a3a52;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .terminal-container {
            background: #0a0a0a;
            border: 1px solid #1a3a52;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.85rem;
        }

        .terminal-line {
            color: #6b9bc3;
            margin: 0.3rem 0;
        }

        .terminal-prompt {
            color: #ffd700;
        }

        .terminal-output {
            color: #c0c0c0;
        }

        .cursor {
            display: inline-block;
            width: 8px;
            height: 14px;
            background: #ffd700;
            animation: blink 1s infinite;
            margin-left: 2px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        h1 {
            font-size: 1.3rem;
            font-weight: 400;
            color: #ffd700;
            font-family: monospace;
            letter-spacing: 1px;
        }

        h1::before {
            content: "$ ";
            color: #1a3a52;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
            flex-wrap: wrap;
        }

        nav a {
            text-decoration: none;
            color: #6b9bc3;
            font-size: 0.9rem;
            transition: all 0.3s;
            font-family: monospace;
        }

        nav a:hover {
            color: #ffd700;
        }

        nav a::before {
            content: "[";
            color: #1a3a52;
        }

        nav a::after {
            content: "]";
            color: #1a3a52;
        }

        .main-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .left-column, .right-column {
            background: #0f0f0f;
            padding: 2.5rem;
            border: 1px solid #1a3a52;
            border-radius: 0;
        }

        .subtitle {
            font-size: 1.5rem;
            color: #ffd700;
            margin-bottom: 1.5rem;
            font-weight: 400;
            font-family: monospace;
        }

        .subtitle::before {
            content: "# ";
            color: #1a3a52;
        }

        .pronunciation {
            color: #808080;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            font-family: monospace;
        }

        .village-note {
            color: #606060;
            font-style: italic;
            font-size: 0.85rem;
            margin-bottom: 1.5rem;
            font-family: monospace;
        }

        .intro-box {
            background: #1a1a1a;
            padding: 1.5rem;
            border-left: 3px solid #ffd700;
            margin: 1.5rem 0;
            font-style: italic;
            color: #a0a0a0;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .bio-text {
            margin: 1.5rem 0;
            line-height: 1.8;
            color: #c0c0c0;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .section {
            margin: 2.5rem 0;
        }

        .section h2 {
            font-size: 1.2rem;
            color: #6b9bc3;
            margin-bottom: 1.2rem;
            font-weight: 400;
            font-family: monospace;
        }

        .section h2::before {
            content: "## ";
            color: #1a3a52;
        }

        .section h3 {
            font-size: 1rem;
            color: #6b9bc3;
            margin: 1.5rem 0 1rem;
            font-weight: 400;
            font-family: monospace;
        }

        .section h3::before {
            content: "### ";
            color: #1a3a52;
        }

        .affiliations {
            list-style: none;
            padding-left: 0;
        }

        .affiliations li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: #c0c0c0;
            font-family: monospace;
        }

        .affiliations li:before {
            content: ">";
            position: absolute;
            left: 0;
            color: #ffd700;
            font-weight: bold;
        }

        .affiliations a, .section a {
            color: #6b9bc3;
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all 0.3s;
        }

        .affiliations a:hover, .section a:hover {
            color: #ffd700;
            border-bottom: 1px solid #ffd700;
        }

        .location-box {
            background: #1a1a1a;
            padding: 1.5rem;
            border: 1px solid #1a3a52;
            margin: 1.5rem 0;
        }

        .location-box h3 {
            margin-top: 0;
        }

        .sardinia-info {
            margin-top: 1rem;
            font-size: 0.85rem;
            line-height: 1.6;
            color: #a0a0a0;
            font-family: monospace;
        }

        .research-interests {
            background: #1a1a1a;
            padding: 1.5rem;
            border-left: 3px solid #ffd700;
            margin: 1.5rem 0;
            font-size: 0.9rem;
            line-height: 1.7;
            font-family: monospace;
            color: #c0c0c0;
        }

        .paper-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.85rem;
            font-family: monospace;
        }

        .paper-table th {
            background: #1a1a1a;
            padding: 0.75rem;
            text-align: left;
            font-weight: 400;
            border-bottom: 2px solid #1a3a52;
            color: #ffd700;
        }

        .paper-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #1a3a52;
            vertical-align: top;
            color: #c0c0c0;
        }

        .paper-table tr:hover {
            background: #1a1a1a;
        }

        .project-item {
            margin: 1rem 0;
            padding: 1rem;
            background: #1a1a1a;
            border-left: 2px solid #1a3a52;
            font-family: monospace;
            font-size: 0.85rem;
            color: #c0c0c0;
        }

        .project-item strong {
            color: #6b9bc3;
        }

        .thesis-item {
            margin: 1rem 0;
            padding-left: 1.5rem;
            border-left: 2px solid #1a3a52;
            font-family: monospace;
            font-size: 0.85rem;
            color: #c0c0c0;
        }

        .thesis-item strong {
            color: #6b9bc3;
        }

        hr {
            border: none;
            border-top: 1px solid #1a3a52;
            margin: 2rem 0;
        }

        footer {
            background: #000;
            color: #808080;
            padding: 2rem 0;
            margin-top: 3rem;
            border-top: 2px solid #1a3a52;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .quote {
            font-style: italic;
            font-size: 0.9rem;
            font-family: monospace;
            color: #6b9bc3;
        }

        .social-links a {
            color: #6b9bc3;
            text-decoration: none;
            margin-left: 1.5rem;
            transition: all 0.3s;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .social-links a:hover {
            color: #ffd700;
        }

        .social-links a::before {
            content: "[ ";
        }

        .social-links a::after {
            content: " ]";
        }

        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }

            .main-container {
                padding: 0 1rem;
            }

            .left-column, .right-column {
                padding: 1.5rem;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .social-links a {
                margin: 0 0.75rem;
            }
        }

        strong {
            color: #6b9bc3;
        }

        em {
            color: #ffd700;
        }

        h4 {
            color: #808080;
            font-family: monospace;
            font-weight: 400;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        ::-webkit-scrollbar-thumb {
            background: #1a3a52;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b9bc3;
        }

        /* Research Graph Styles */
        #research-graph {
            width: 100%;
            height: 500px;
            background: #0a0a0a;
            border: 1px solid #1a3a52;
            margin: 2rem 0;
            position: relative;
        }

        .graph-legend {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(26, 58, 82, 0.8);
            padding: 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
        }

        .legend-item {
            margin: 0.3rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <script>
        // Theme Switcher
        function setTheme(theme) {
            document.body.className = theme === 'academic' ? '' : `theme-${theme}`;
            
            // Update active button
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Save theme preference
            localStorage.setItem('theme', theme);
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme && savedTheme !== 'academic') {
            document.body.className = `theme-${savedTheme}`;
            document.querySelectorAll('.theme-btn').forEach(btn => {
                if (btn.textContent.toLowerCase() === savedTheme) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        // Terminal Animation
        const commands = [
            { cmd: 'whoami', output: 'federico_atzori' },
            { cmd: 'cat research.txt', output: 'behavioral_economics | game_theory | experiments' },
            { cmd: 'ls affiliations/', output: 'sapienza/ cagliari/ crenos/' },
            { cmd: 'echo $INTERESTS', output: 'social_norms cooperation risk_attitudes' }
        ];
        
        let currentCommandIndex = 0;
        let currentCharIndex = 0;
        let isTypingCommand = true;
        
        function typeWriter() {
            const commandText = document.getElementById('command-text');
            const outputText = document.getElementById('output-text');
            const currentCmd = commands[currentCommandIndex];
            
            if (isTypingCommand) {
                if (currentCharIndex < currentCmd.cmd.length) {
                    commandText.textContent += currentCmd.cmd.charAt(currentCharIndex);
                    currentCharIndex++;
                    setTimeout(typeWriter, 100);
                } else {
                    isTypingCommand = false;
                    currentCharIndex = 0;
                    setTimeout(typeWriter, 500);
                }
            } else {
                if (currentCharIndex < currentCmd.output.length) {
                    outputText.textContent += currentCmd.output.charAt(currentCharIndex);
                    currentCharIndex++;
                    setTimeout(typeWriter, 50);
                } else {
                    setTimeout(() => {
                        currentCommandIndex = (currentCommandIndex + 1) % commands.length;
                        commandText.textContent = '';
                        outputText.textContent = '';
                        currentCharIndex = 0;
                        isTypingCommand = true;
                        typeWriter();
                    }, 3000);
                }
            }
        }
        
        window.addEventListener('load', () => {
            setTimeout(typeWriter, 1000);
        });
    </script>
    <header>
        <div class="header-container">
            <div class="header-content">
                <h1>federico_atzori.phd</h1>
                <nav>
                    <ul>
                        <li><a href="index.html">home</a></li>
                        <li><a href="about.html">about</a></li>
                        <li><a href="teaching.html">teaching</a></li>
                        <li><a href="events.html">events</a></li>
                        <li><a href="otree.html">otree</a></li>
                    </ul>
                </nav>
            </div>
            
            <div class="terminal-container">
                <div class="terminal-line">
                    <span class="terminal-prompt">$</span> <span id="command-text"></span><span class="cursor"></span>
                </div>
                <div class="terminal-line terminal-output" id="output-text"></div>
            </div>
        </div>
    </header>

    <!-- Theme Switcher -->
    <div class="theme-switcher">
        <button class="theme-btn active" onclick="setTheme('academic')">Academic</button>
        <button class="theme-btn" onclick="setTheme('hacker')">Hacker</button>
        <button class="theme-btn" onclick="setTheme('paper')">Paper</button>
    </div>

    <div class="main-container">
        <!-- Left Column: About Me -->
        <div class="left-column">
            <h2 class="subtitle">behavioral_science & economics</h2>
            
            <p class="pronunciation">pronunciation: /feˈdeːriko aˈzoːri/</p>
            
            <p class="village-note">*surname refers to an ancient village in the Judicate of Cagliari</p>

            <div class="intro-box">
                "An economist who enjoys putting people in weird decision-making situations, building oTree experiments that are way more complex than they need to be, and running everything on servers that only crash at the worst possible moment."
            </div>

            <div class="bio-text">
                <p>I'm a behavioral scientist who studies how people actually behave when they face incentives, norms, and strategic interactions. Over the years, I've worked with lab (yes, also programming skills) and field experiments to unpack the mechanics of human cooperation and conflict. My compass sits between <em>Microeconomics</em>, <em>Game Theory</em>, <em>Behavioral</em> and <em>Experimental Economics</em>, driven by a stubborn curiosity for how social norms emerge, shape choices, and sometimes tilt the entire game.</p>
            </div>

            <div class="section">
                <h2>current_affiliations</h2>
                <ul class="affiliations">
                    <li>Postdoctoral Fellow at <a href="https://sites.google.com/a/uniroma1.it/cimeo/" target="_blank">CIMEO</a>, Sapienza University</li>
                    <li>Post-Doctoral Fellow at <a href="https://web.unica.it/unica/en/dip_scienzeecoaziend.page" target="_blank">Dept. of Economics and Business Sciences</a>, University of Cagliari</li>
                    <li>Post-Doctoral Fellow at <a href="https://crenos.unica.it/" target="_blank">CRENoS</a>, University of Cagliari and Sassari</li>
                </ul>
            </div>

            <hr>

            <div class="location-box">
                <h3>origin.location</h3>
                <a href="https://earth.google.com/web/search/cagliari" target="_blank" style="color: #6b9bc3;">→ google_earth</a>
                
                <div class="sardinia-info">
                    <p><strong>Sardinia</strong> (/sɑːrˈdɪniə) — second-largest island in the Mediterranean Sea, after Sicily. Inhabited since the Paleolithic era (~20,000-10,000 years ago). For some, the mythical <em>Atlantis</em>.</p>
                </div>
            </div>
        </div>

        <!-- Right Column: Research -->
        <div class="right-column" id="research">
            <h2 class="subtitle">research.output</h2>

            <div class="research-interests">
                <strong>research_interests:</strong><br><br>
                Behavioral & experimental economics → social norms, pro-social behaviors, risk attitudes, civil economy, gender, religion<br>
                Microeconomics → game theory<br>
                Sociology → economic sociology, embeddedness, social capital, informal economy<br>
                Psychology → economic psychology, groups & organizations
            </div>

            <h3 style="margin: 2rem 0 1rem; color: #6b9bc3; font-family: monospace;">research.network</h3>
            <canvas id="research-graph"></canvas>
            <div class="graph-legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #ffd700;"></div>
                    <span>Papers</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #6b9bc3;"></div>
                    <span>Topics</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #1a3a52;"></div>
                    <span>Co-authors</span>
                </div>
            </div>

            <div class="section">
                <h3>publications.working_papers</h3>
                
                <table class="paper-table">
                    <thead>
                        <tr>
                            <th>title</th>
                            <th>authors</th>
                            <th>repo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><a href="https://crenos.unica.it/crenos/publications/creative-minds-age-ai-personality-traits-ai-perception-and-creativity-tasks" target="_blank"><em>Creative Minds in the Age of AI</em></a></td>
                            <td>Atzori F., Corazzini L., Guarnieri A. (2025)</td>
                            <td>CRENoS</td>
                        </tr>
                        <tr>
                            <td><a href="https://papers.ssrn.com/sol3/Delivery.cfm?abstractid=5350667" target="_blank"><em>When Giving Justifies Gambling</em></a></td>
                            <td>Ballicu G., Atzori F., Pelligra V. (2025)</td>
                            <td>SSRN</td>
                        </tr>
                        <tr>
                            <td><a href="https://grins.it/output/identifying-electricity-consumption-patterns-using-high-frequency-data-volatility-and-self" target="_blank"><em>Identifying Electricity Consumption Patterns</em></a></td>
                            <td>Atzori F., Corazzini L., Guerzoni M., Mantovani M. (2025)</td>
                            <td>GRINS</td>
                        </tr>
                        <tr>
                            <td><a href="https://crenos.unica.it/crenos/publications/under-big-gods%E2%80%99-eyes-impact-religious-beliefs-altruistic-punishment-during-covid-19" target="_blank"><em>Under Big Gods' Eyes</em></a></td>
                            <td>Atzori F., Ballicu G., Pelligra V. (2025)</td>
                            <td>CRENoS</td>
                        </tr>
                        <tr>
                            <td><a href="https://econpapers.repec.org/paper/cnscnscwp/202407.htm" target="_blank"><em>Framed Norms</em></a></td>
                            <td>Atzori F., Pelligra V. (2024)</td>
                            <td>CRENoS</td>
                        </tr>
                    </tbody>
                </table>
            </div>


        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="quote">
                "I'm here to play games." — G. Charness
            </div>
            <div class="social-links">
                <a href="https://www.linkedin.com/in/federicoatzori/" target="_blank">linkedin</a>
            </div>
        </div>
    </footer>

    <script>
        // Research Network Graph
        const canvas = document.getElementById('research-graph');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        canvas.width = canvas.offsetWidth;
        canvas.height = 500;
        
        // Graph data
        const nodes = [
            // Papers (yellow)
            { id: 'ai', label: 'AI & Creativity', x: 150, y: 100, color: '#ffd700', type: 'paper', connections: ['creativity', 'corazzini', 'guarnieri'] },
            { id: 'gambling', label: 'Prosocial Risk', x: 400, y: 80, color: '#ffd700', type: 'paper', connections: ['risk', 'prosocial', 'ballicu', 'pelligra'] },
            { id: 'electricity', label: 'Electricity', x: 650, y: 120, color: '#ffd700', type: 'paper', connections: ['behavioral', 'corazzini', 'guerzoni', 'mantovani'] },
            { id: 'religion', label: 'Big Gods', x: 300, y: 250, color: '#ffd700', type: 'paper', connections: ['norms', 'ballicu', 'pelligra'] },
            { id: 'tax', label: 'Tax Compliance', x: 550, y: 280, color: '#ffd700', type: 'paper', connections: ['norms', 'behavioral', 'pelligra'] },
            
            // Topics (blue)
            { id: 'creativity', label: 'Creativity', x: 100, y: 200, color: '#6b9bc3', type: 'topic' },
            { id: 'risk', label: 'Risk', x: 450, y: 180, color: '#6b9bc3', type: 'topic' },
            { id: 'prosocial', label: 'Prosocial', x: 500, y: 380, color: '#6b9bc3', type: 'topic' },
            { id: 'norms', label: 'Social Norms', x: 350, y: 400, color: '#6b9bc3', type: 'topic' },
            { id: 'behavioral', label: 'Behavioral Econ', x: 600, y: 200, color: '#6b9bc3', type: 'topic' },
            
            // Co-authors (dark blue)
            { id: 'corazzini', label: 'Corazzini', x: 200, y: 350, color: '#1a3a52', type: 'author' },
            { id: 'pelligra', label: 'Pelligra', x: 450, y: 450, color: '#1a3a52', type: 'author' },
            { id: 'ballicu', label: 'Ballicu', x: 300, y: 450, color: '#1a3a52', type: 'author' },
            { id: 'guarnieri', label: 'Guarnieri', x: 80, y: 300, color: '#1a3a52', type: 'author' },
            { id: 'guerzoni', label: 'Guerzoni', x: 650, y: 350, color: '#1a3a52', type: 'author' },
            { id: 'mantovani', label: 'Mantovani', x: 700, y: 250, color: '#1a3a52', type: 'author' }
        ];
        
        let hoveredNode = null;
        let isDragging = false;
        let draggedNode = null;
        let offsetX = 0;
        let offsetY = 0;
        
        function drawGraph() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw connections
            ctx.strokeStyle = '#1a3a52';
            ctx.lineWidth = 1;
            nodes.forEach(node => {
                if (node.connections) {
                    node.connections.forEach(connId => {
                        const target = nodes.find(n => n.id === connId);
                        if (target) {
                            ctx.beginPath();
                            ctx.moveTo(node.x, node.y);
                            ctx.lineTo(target.x, target.y);
                            ctx.stroke();
                        }
                    });
                }
            });
            
            // Draw nodes
            nodes.forEach(node => {
                ctx.beginPath();
                const radius = node === hoveredNode ? 8 : 6;
                ctx.arc(node.x, node.y, radius, 0, Math.PI * 2);
                ctx.fillStyle = node.color;
                ctx.fill();
                
                // Draw labels
                if (node === hoveredNode || node.type === 'paper') {
                    ctx.fillStyle = '#e0e0e0';
                    ctx.font = '10px Courier New';
                    ctx.textAlign = 'center';
                    ctx.fillText(node.label, node.x, node.y - 12);
                }
            });
        }
        
        // Mouse interaction
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            if (isDragging && draggedNode) {
                draggedNode.x = x - offsetX;
                draggedNode.y = y - offsetY;
                drawGraph();
                return;
            }
            
            hoveredNode = null;
            nodes.forEach(node => {
                const dx = x - node.x;
                const dy = y - node.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < 10) {
                    hoveredNode = node;
                }
            });
            
            canvas.style.cursor = hoveredNode ? 'pointer' : 'default';
            drawGraph();
        });
        
        canvas.addEventListener('mousedown', (e) => {
            if (hoveredNode) {
                isDragging = true;
                draggedNode = hoveredNode;
                const rect = canvas.getBoundingClientRect();
                offsetX = e.clientX - rect.left - draggedNode.x;
                offsetY = e.clientY - rect.top - draggedNode.y;
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            isDragging = false;
            draggedNode = null;
        });
        
        canvas.addEventListener('mouseleave', () => {
            hoveredNode = null;
            isDragging = false;
            draggedNode = null;
            drawGraph();
        });
        
        // Initial draw
        drawGraph();
        
        // Redraw on resize
        window.addEventListener('resize', () => {
            canvas.width = canvas.offsetWidth;
            drawGraph();
        });
    </script>
</body>
</html>
